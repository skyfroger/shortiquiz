# Shortiquiz

С помощью этого расширения можно добавить тестовые задания на страницы сайта.

## Установка

```bash
quarto add skyfroger/shortiquiz
```

## Шорткод qselect

Шорткод `qselect` добавляет в текст выпадающий список с вариантами ответов. Пример записи шорткода:

``` markdown
{{{< qselect "int|float|str" show="int()" mono=true >}}}
```

Параметры:

- после названия шорткода указываются варианты ответов, разделённые символом `|`. Правильным будет считаться первый вариант ответа. Варианты перемешиваются перед показом.
- `show` - что реально будет показано после правильного ответа. Необязательный параметр.
- `mono` - если значение параметра `true`, ответ выводится моноширным шрифтом.

:::{.callout-note title="Цвет ответа"}

Если правильный ответ получен с первой попытки, текст ответа выделен зелёным цветом и бардовым в ином случае.

:::

## Шорткод qinput

Шорткод `qinput` добавляет текстовое поле для ввода ответа. После трёх неправильных ответов, можно предложить подсказку. Ответ отправляется на проверку после нажатия клавиши  `Enter`  или снятия фокуса с поля ввода. Пример записи шорткода:

```markdown
{{{< qinput 2.5|2,5 hints="50% от значения напряжения" show="два с половиной" size=3 >}}}
```

Параметры:

- после названия шорткода указываются варианты ответов, разделённые символом `|`. Любой из перечисленных вариантов будет считаться правильным. После правильного ответа вместо текстового поля покажется первый указанный вариант ответа, если не указано значение параметра `show`.
- `tol` - допуск по числовому значению. Применим только к числовым значениям. Если ответ равен $n$, то правильным будет считаться число `n - tol <= ответ <= n + tol`.
- `show` - что показать на месте правильного ответа. Необязательный параметр.
- `hints` - текст подсказки. Необязательный параметр.
- `mono` - если значение параметра `true`, ответ выводится моноширным шрифтом.
- `size` - ширина текстового поля (используется атрибут `size` тега `input`). Значение по умолчанию - 2. Необязательный параметр.

Вот пример использования этого шорткода. Рассмотрим ШИМ-сигнал с коэффициентом заполнения 50%. Если опорное напряжение равно 5 В, то среднее напряжение на выходе будет равно {{< qinput 2.5|2,5 hints="50% от значения напряжения" show="два с половиной"  size=3 >}} Вольта.

В следующее поле можно ввести в качестве ответа число от 8 до 12: {{< qinput 10 tol=2 >}}. В шорткоде используется параметр `tol`:

```markdown
{{{< qinput 10 tol=2 >}}}
```

## Вопрос с множественным выбором

Чтобы добавить вопрос, нужно подключить фильтр `shortiquiz` (ко всему проекту, или отдельной странице) и внутри блока с классом `.qmulti` добавить необходимую разметку. Пример минимальной разметки вопроса:

```markdown
:::{.qmulti}

Как можно определить тип переменной?

- Использовать функцию `type`.
- Вывести значение переменной на экран и определить её тип по этому результату.
- Использовать её в выражении, значение которого известно.
- Посмотреть на описание переменной.

:::
```

Вся разметка до списка будет считаться текстом вопроса, пункты списка - вариантами ответов. Список может быть как нумерованным, так и не нумерованным. Первый пункт считается правильным. Сами варианты перемешиваются.

С помощью блоков-цитат можно добавить к вопросу подсказку (можно воспользоваться после неправильного ответа, нажав кнопку с вопросом в правом верхнем углу вопроса), а также добавить комментарии к каждому варианту ответа. В таком случае блоки-цитаты должны располагаться внутри пункта списка.

В следующем примере показана разметка с подсказками и отзывами на каждый вариант ответа:

````markdown
:::{.qmulti}

Какое значение выведется на экран:

```python
print(int(53.785))
```

> Как проще всего из целого числа получить вещественное?

- 53

  > Число 53.785 преобразуется в целое функцие `int`. Дробная часть исходного числа отбрасывается.

- Возникнет ошибка времени выполнения.

  > В этом выражении нет синтаксических ошибок.

- 54

  > Функция `int` не округляет вещественное число.

- 53.785

  > Функция `int` преобразует число в целое.

:::
````

## Открытый вопрос

Разметка вопроса с открытым ответом:

````markdown
:::{.qinput}

Каким будет результат выполнения кода:

```python
print(42)
```

> Обратите внимание на то, что написано в скобках.

- 42

- 24

  > Цифры перепутаны местами.

:::
````

## Вопрос с несколькими правильными ответами

Внутри блока с классом `.qcheck` добавляется необходимая разметка. Пример минимальной разметки:

```markdown
:::{.qcheck}

Выберите варианты с корректным именем переменной в Python.

- [x] `sum`
- [ ] `1st_name`
- [ ] `class`
- [x] `_last_name`
- [x] `Student`

:::
```

Правила разметки такие же как и для вопроса с множественным выбором. Варианты ответов помещаются в чек-лист. Правильные варианты ответов помечаются крестиком.

В следующем примере для каждого вопроса добавлен отзыв. После того как пользователь нажмёт кнопку *Проверить*, будет показано, какие из выбранных вариантов были правильными, а какие нет. Если к варианту добавлен отзыв, он тоже покажется.

Пример разметки вопроса с отзывами:

```markdown
:::{.qcheck}

Что из перечисленного является логическим выражением?

- [x] `True`

  > `True` и `False` - логические литералы. Их можно отнести к логическим выражениям.
  
- [x] `3 == 4`

  > Результат сравнения с помощью `==` принимает значение `True` или `False`.

- [ ] `3 + 4`

  > Значение этого выражения число.

- [x] `3 + 4 == 7`

  > Выражение 3+4 равно 7. `7 == 7` - логическое выражение.

- [ ] `"False"`

  > Значение в двойных кавычках, значит это строка.

:::
```

## Задачи Парсона

Разметка для задания в котором необходимо расположить строки кода программы в правильном порядке. Атрибут `spaces` указывает на количество пробелов в отступе. По умолчанию значение равно 4.

Пример разметки:

````markdown
:::{.qparson spaces=4}

```python
n = int(input('Введите число'))
while n > 0:
    print(n)
    n = n - 1
```

:::
````

Может понадобится объединить соседние строки кода в один блок инструкций. Это полезно, когда порядок следования этих инструкций не важен для правильности решения. Для этого через атрибут `sep` указывается произвольный сепаратор, который будет разделителем блоков для задания. Пример разметки со строкой-сепаратором `##`:

````markdown
:::{.qparson sep=##}

```python
n = int(input("n>"))
sum = 0##
while n > 0:##
    if n % 2 == 0:##
        print(n)
        n = n - 1##
```

:::
````

К блокам можно *подмешать* набор **дистракторов** - неправильных вариантов, которые усложнят выполнение задания. Дистракторы помещаются во второй блок кода внутри элемента `.qparson`. На этот блок также распространяется сепаратор из атрибута `sep`. Пример разметки с одним дистрактором:

````markdown
:::{.qparson spaces=4 sep=##}

```python
n = int(input())
sum = 0##
while n > 0:##
    if n % 2 == 0:##
        print(n)
        n = n - 1##
```

```py
n = int(input())
sum = 1##
```

:::
````

## Группировка вопросов

Несколько идущих подряд вопросов `qmulti`,  `qcheck` и `qinput` можно сгруппировать с помощью блока `qgroup`.

```markdown
:::{.qgroup}

:::{.qmulti}

...

:::

:::{.qcheck}

...

:::

:::
```

## Разблокировка этапов

После правильных {{< qselect да|нет gate=s1 >}} ответов (1) {{< qinput 1 gate=s1 >}} разблокируется следующий шаг инструкции.

:::{.qmulti gate=s1}

Как можно определить тип переменной?

- Использовать функцию `type`.
- Вывести значение переменной на экран и определить её тип по этому результату.
- Использовать её в выражении, значение которого известно.
- Посмотреть на описание переменной.

:::

:::{.qgate name=s1}

Этот контент будет скрыт, пока нет правильных ответов на два вопроса выше. В самом тексте могут быть новые инструкции. После правильных {{< qselect да|нет gate=s2 >}} ответов (1) {{< qinput 1 gate=s2 >}} разблокируется следующий шаг инструкции.

:::{.qcheck gate=s2}

Выберите варианты с корректным именем переменной в Python.

- [x] `sum`
- [ ] `1st_name`
- [ ] `class`
- [x] `_last_name`
- [x] `Student`

:::

:::

:::{.qgate name=s2}

Это второй этап.

:::{.qgroup gate=s3}

:::{.qmulti}

Какое значение выведется на экран:

```python
print(int(53.785))
```

> Как проще всего из целого числа получить вещественное?

- 53

  > Число 53.785 преобразуется в целое функцие `int`. Дробная часть исходного числа отбрасывается.

- Возникнет ошибка времени выполнения.

  > В этом выражении нет синтаксических ошибок.

- 54

  > Функция `int` не округляет вещественное число.

- 53.785

  > Функция `int` преобразует число в целое.

:::

:::{.qcheck}

Какие из логических выражений помогут определить, что значение переменной `x` лежит между 0 и 5?

- [ ] `x > 0 and < 5`

  > Не хватает `x` в правой части оператора `and`.

- [x] `0 < x < 5`

  > Как не странно, такой вариант записи условия допустим в Python.

- [ ] `x > 0 or x < 5`

  > Значение этого логического выражения всегда будет равно `True`, так как любое число больше 0 **или** меньше 5.

- [x] `x > 0 and x < 5`

  > Правильный вариант.  Значение `x` одновременно больше 0 **и** меньше 5.

:::

:::

:::

:::{.qgate name=s3}

Следующий этап открывается по нажатию на кнопку.

{{< qnext gate=s4 >}}

:::



:::{.qgate name=s4}

Это этап, открываемый по нажатию на кнопку.

:::

## Подсказки к решению задачи

В блоке `.qsolution` размещаются подсказки к решению задачи. Каждая подсказка - элемент нумерованного или ненумерованного списка. Внутри элемента списка может быть любая разметка. Подсказки открываются последовательно. Если в блоке `.qsolution` есть блок с кодом, он будет считаться решением задачи. Блок с решением доступен только после того, как открыты все подсказки. Изначально строки программы скрыты и открываются последовательно. После десятой открытой строки решения можно открыть код целиком.

Пример разметки:

````markdown
:::{.qsolution}

1. Используйте каскадную форму записи инструкции ветвления.
2. Учтите, что к зимним относятся месяцы с номерами 1, 2 и 12.
3. Достаточно прописать логические выражения для трёх пор года. Если ни одно из трёх условий не выполнится, значит выполнится ветвь `else` для оставшейся последней поры года. Так получится сократить код.

```python
month = int(input("Введите номер месяца (от 1 до 12): "))

if month == 1 or month == 2 or month == 12:
    print("Зима")
elif month >=3 and month <=5:
    print("Весна")
elif month >= 6 and month <= 8:
    print("Лето")
else:
    print("Осень")
```

:::
````

## Флэшкарты

Компонент добавляет на страницу набор карточек с вопросами и ответами. Учащийся читает вопрос и должен вспомнить ответ. После появления ответа учащийся выбирает из двух вариантов - удалось вспомнить ответ или нет. Если выбрать ответ Не помню, карточка добавляется в конец стопки.

Вопросы размещаются внутри блока с классом `.qflashcards`. Каждый вопрос - это элемент списка. Элемент цитата внутри элемента списка содержит ответ. Остальные элементы будут находится в формулировке вопроса.

Пример разметки:

```markdown
:::{.qflashcards}

- Функция для вывода значений на экран.

  > `print()`

- Функция для ввода значений с клавиатуры.

  > `input()`

- Значения какого типа возвращает функция `input()`?

  > Строкового (`str`)

- Функция для преобразования значений в целые числа.

  > `int()`

:::
```
